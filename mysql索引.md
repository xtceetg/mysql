# 基础

<<<<<<< HEAD
=======
<<<<<<< HEAD
>>>>>>> 5c7efb65749d1c43e3f4c0aeacf13e35dcb4f616
## B-Tree 索引

MyISAM使用前缀压缩技术使得索引更小，而InnoDB则按照原数据格式进行存储。

MyISAM索引通过数据的物理位置引用被索引的行，而InnoDB则根据主键引用被索引的行。

<<<<<<< HEAD
=======
=======
>>>>>>> 48bada87431801f45924fe4faf853accffeddcf0
>>>>>>> 5c7efb65749d1c43e3f4c0aeacf13e35dcb4f616
索引可以包含一个或多个列的值。如果索引包含多个列，那么列的顺序也十分重要，因为MySQL只能高效地使用索引的最左前缀列。创建一个包含两个列的索引，和创建两个只包含一个列的索引是大不相同的。

索引对多个值进行排序的依据是CREATE TABLE语句中定义索引时列的顺序。

<<<<<<< HEAD
=======
<<<<<<< HEAD
>>>>>>> 5c7efb65749d1c43e3f4c0aeacf13e35dcb4f616
- 全值匹配

  全值匹配指的是和索引中的所有列进行匹配

- 匹配最左前缀

  即只使用索引的第一列

- 匹配列前缀

  匹配某一列的值的开头部分

- 匹配范围值

- 精确匹配某一列并范围匹配另外一列

- 只访问索引的查询

  即查询只需要访问索引，无须访问数据行。

### B-Tree索引的限制

- 如果不是按照索引的最左列开始查找，则无法使用索引。
- 不能跳过索引中的列。
- 如果查询中有某个列的范围查询，则其右边所有列都无法使用索引优化查找。

## 索引的优点 

1. 索引大大减少服务器需要扫描的数据量。
2. 索引可以帮助服务器避免排序和临时表。
3. 索引可以将随机IO变为顺序IO。

### 顺序的主键什么时候会造成更坏的结果？

对于高并发工作负载，在InnoDB中按主键顺序插入可能会造成明显的争用。主键的上界会成为“热点”。因为所有的插入都发生在这里，所以并发插入可能导致间隙锁竞争。另一个热点可能是AUTO_INCREMENT锁机制;如果遇到这个问题，则可能需要考虑重新设计表或者应用，或者更改innodb_autoinc_lock_mode配置。如果你的服务器版本不支持，可以升级到新版本的InnoDB。

### 覆盖索引

<<<<<<< HEAD
如果一个索引包含（或者说覆盖）所有需要查询的字段的值，我们就称之为“覆盖索引”。
=======
如果一个索引包含（或者说覆盖）所有需要查询的字段的值，我们就称之为“覆盖索引”。
=======
>>>>>>> 48bada87431801f45924fe4faf853accffeddcf0
>>>>>>> 5c7efb65749d1c43e3f4c0aeacf13e35dcb4f616
